"use strict";(()=>{const o=(n,e=0)=>{let a=3735928559^e,l=1103547991^e;for(let e=0,t;e<n.length;e++)t=n.charCodeAt(e),a=Math.imul(a^t,2654435761),l=Math.imul(l^t,1597334677);return a=Math.imul(a^a>>>16,2246822507)^Math.imul(l^l>>>13,3266489909),4294967296*(2097151&(l=Math.imul(l^l>>>16,2246822507)^Math.imul(a^a>>>13,3266489909)))+(a>>>0)},d=e=>{var t=document.createElement("a");return t.href="/users.html?name="+encodeURIComponent(e),t.title=e,t.innerText=e,t},n=e=>{if(200===e.status)return e.json();throw new Error("oops, couldn't load the data")},i=(e,t=0)=>{var n=new Intl.RelativeTimeFormat("en",{numeric:"always"}),e=(Date.now()-e)/1e3;return e<60?n.format((-e).toFixed(1),"seconds"):e<3600?n.format((-e/60).toFixed(0),"minutes"):e<86400?n.format((-e/3600).toFixed(0),"hours"):e<2678400?n.format((-e/86400).toFixed(0),"days"):e<31622400?n.format((-e/2592e3).toFixed(0),"months"):"over a year ago"},s=e=>{document.getElementById("last-updated").innerText=`(Last updated ${i(Date.parse(e+"Z"),1)})`};document.getElementById("rank-period").addEventListener("change",e=>{var t=new URL(location.href);t.hash=e.target.value,location.replace(t),location.reload()});var e,t=()=>{fetch("/api/blocks").then(n).then(({blocks:e,last_updated_at:t})=>{s(t);for(let t=0;t<256;t++){var n=document.getElementById("b-"+t),a=e.findIndex(e=>e.block===t);0<=a&&(a=e[a],l=n.querySelector(".s-nick"),n.classList.remove("s-empty"),n.querySelector(".s-count").innerText=`(${a.claims} address${1==a.claims?"":"es"})`,a.is_tied?(l.innerText="(tied)",n.classList.add("s-tied")):(l.appendChild(d(a.nick)),n.style.backgroundColor=(l=a.nick,`hsla(${(4095&o(l))/4095*180|0}, 90%, 90%, 1)`)))}var l})},a=()=>{var e=new URLSearchParams(location.search).get("name"),t=document.getElementById("user-name");const d=document.getElementById("total-addresses"),i=document.querySelector("ul");t.innerText=e,fetch("/api/users?name="+e).then(n).then(({rankings:e,last_updated_at:t})=>{s(t),d.innerText=e.reduce((e,t)=>e+t.claims,0);for(const r of e){var n=document.createElement("li"),a=`${r.is_tied?"Tied ":""}${l=r.rank,a=void 0,o=void 0,a=l%10,o=l%100,1==a&&11!=o?l+"st":2==a&&12!=o?l+"nd":3==a&&13!=o?l+"rd":l+"th"} in block ${r.block}.0.0.0/8 with ${r.claims} address`+(1==r.claims?"":"es");n.innerHTML=a,i.appendChild(n)}var l,a,o})},l=location.pathname;"/"===l||"/index.html"===l?(fetch("/api/ip").then(n).then(e=>{e.v4&&(document.getElementById("user-ip").innerText=e.ip)}),fetch("/api/recent").then(n).then(({claims:e})=>{const r=document.getElementById("recent-claims"),t=document.getElementById("show-all-recent");r.innerHTML="",e.forEach(({nick:e,ip:t,claimed_at:n},a)=>{var l=document.createElement("div"),o=document.createElement("b");l.classList.add("recent-claim"),o.innerText=t,l.append(o,` got captured ${i(1e3*n)} by `),l.appendChild(d(e)),10<=a&&(l.style.display="none"),r.appendChild(l)}),t.style.display="",t.onclick=function(){t.style.display="none",r.querySelectorAll(".recent-claim").forEach(e=>e.style.display="")}}),e=document.getElementById("rank-period"),location.hash&&(e.value=location.hash.slice(1)),e={hour:"/hour",day:"/day",week:"/week",month:"/month",year:"/year",all:"/all"}[e.value],fetch("/api/ranks"+e).then(n).then(({rankings:e})=>{const r=document.querySelector("ol"),t=(e.forEach(({nick:e,blocks:t,total_claims:n},a)=>{var l=document.createElement("li"),o=document.createElement("b");o.innerText=t.length,l.appendChild(d(e)),l.append(` with ${n} address${1==n?"":"es"}, and `,o,` block${1<t.length?"s":""} controlled: `),l.append(t.join(", ")),r.appendChild(l)}),document.getElementById("show-all-tops"));0<e.length?(t.style.display="",t.onclick=function(){t.style.display="none",r.classList.remove("topN")}):(document.getElementById("no-claimers").innerText="No claimers for this period yet. Why not go ahead and capture some IPs?",t.style.display="none")}),t()):"/users.html"===l&&a()})();